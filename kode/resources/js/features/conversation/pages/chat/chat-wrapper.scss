@use "@/styles/sass/abstracts/" as *;

.chat-wrapper {
  --contact-sidebar: 345px;
  --profile-sidebar: 270px;
  --chat-header: 62px;
  --header-h: 81px;
  --sidebar-height: 62px;
  $sidebar-height: var(--sidebar-height);
  $header-h: var(--header-h);
  $contact-sidebar: var(--contact-sidebar);
  $profile-sidebar: var(--profile-sidebar);
  $chat-header: var(--chat-header);
  @include xxl-down {
    --chat-header: 52px;
  }
  @include xl {
    --header-h: 81px;
  }
  @include xl-down {
    --contact-sidebar: 300px;
    --header-h: 72px;
  }

  @include md-down {
    --contact-sidebar: 100%;
  }

  .chat-contacts {
    max-width: $contact-sidebar;
    width: 100%;
    -webkit-border-end: 1px solid $border-primary;
            border-inline-end: 1px solid $border-primary;
    max-height: calc(100dvh - $header-h);
    min-height: calc(100dvh - $header-h);
    height: 100%;
    overflow: hidden;
    background-color: $color-white;
    @include lg-down {
      max-height: calc(100dvh - calc($header-h + $sidebar-height));
      min-height: calc(100dvh - calc($header-h + $sidebar-height));
    }

    @include md-down {
      position: fixed;
      inset-inline-start: 0;
      inset-block-start: 0;
      -webkit-border-end: none;
              border-inline-end: none;
      -webkit-transform: translateX(-105%);
          -ms-transform: translateX(-105%);
              transform: translateX(-105%);
      -webkit-transition: 0.2s ease-out;
      -o-transition: 0.2s ease-out;
      transition: 0.2s ease-out;
      z-index: 8;
      max-height: 100dvh;
      min-height: 100dvh;
    }

    .contact-tab-content {
      width: 100%;
      max-height: calc(100dvh - calc($header-h + $chat-header));
      overflow-y: auto;
      overflow-x: hidden;
      @include lg-down {
        max-height: calc(
          100dvh - calc($header-h + $chat-header + $sidebar-height)
        );
      }
      @include md-down {
        max-height: calc(100dvh - $chat-header);
      }
    }
  }

  .chat-body {
    max-width: calc(100% - calc($contact-sidebar + $profile-sidebar));
    width: 100%;
    @include xxl-down {
      max-width: calc(100% - $contact-sidebar);
    }

    @include lg-down {
      max-height: calc(
        100dvh - calc($contact-sidebar + $profile-sidebar + $sidebar-height)
      );
    }

    @include md-down {
      max-width: calc(100% - 0px);
    }

    .chat-box {
      max-height: calc(100dvh - calc($chat-header + $header-h + 75px + 10px));
      min-height: calc(100dvh - calc($chat-header + $header-h + 75px + 10px));
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
      @include lg-down {
        max-height: calc(
          100dvh -
            calc($chat-header + $header-h + $sidebar-height + 75px + 10px)
        );
        min-height: calc(
          100dvh -
            calc($chat-header + $header-h + $sidebar-height + 75px + 10px)
        );
      }
    }
  }

  .chat-profile {
    max-width: $profile-sidebar;
    width: 100%;
    max-height: calc(100dvh - $header-h);
    min-height: calc(100dvh - $header-h);
    height: 100%;
    overflow: hidden;
    -webkit-border-start: 1px solid var(--border-primary);
            border-inline-start: 1px solid var(--border-primary);
    background-color: $color-white;
    @include xxl-down {
      position: fixed;
      inset-inline-end: 0;
      -webkit-transition: 0.3s ease-out;
      -o-transition: 0.3s ease-out;
      transition: 0.3s ease-out;
      -webkit-transform: translateX(105%);
          -ms-transform: translateX(105%);
              transform: translateX(105%);
      z-index: 5;
      [dir="rtl"] & {
        -webkit-transform: translateX(-105%);
            -ms-transform: translateX(-105%);
                transform: translateX(-105%);
      }
    }
    @include lg-down {
      max-height: calc(100dvh - calc($header-h + $sidebar-height));
      min-height: calc(100dvh - calc($header-h + $sidebar-height));
    }

    @include md-down {
      inset-block-start: 0;
      max-height: 100dvh;
      min-height: 100dvh;
    }

    .profile-body {
      width: 100%;
      max-height: calc(100dvh - calc($header-h + $chat-header));
      overflow-y: auto;
      overflow-x: hidden;
      @include lg-down {
        max-height: calc(
          100dvh - calc($header-h + $chat-header + $sidebar-height)
        );
      }
      @include md-down {
        max-height: calc(100dvh - $chat-header);
      }
    }
  }

  .chat-header {
    height: $chat-header;
    border-bottom: 1px solid $border-primary;
    padding-inline: 15px;
    @include flex($align: center);
  }

  .sidebar-overlay {
    @include xxl-down {
      position: fixed;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.2);
      inset-inline: 0;
      z-index: 4;
    }
    @include md-down {
      position: fixed;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.2);
      inset-inline: 0;
      z-index: 4;
      inset: 0;
    }
  }
}
