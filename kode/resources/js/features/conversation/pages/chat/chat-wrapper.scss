
@use "@/styles/sass/abstracts/" as *;

.chat-wrapper {
  --contact-sidebar: 345px;
  --profile-sidebar: 270px;
  --chat-header: 62px;
  --sidebar-height: 62px;
  $sidebar-height: var(--sidebar-height);
  $header-h: var(--header-h);
  $contact-sidebar: var(--contact-sidebar);
  $profile-sidebar: var(--profile-sidebar);
  $chat-header: var(--chat-header);
  @include xxl-down {
    --chat-header: 52px;
  }
  @include xl-down {
    --contact-sidebar: 300px;
  }
  @include md-down {
    --contact-sidebar: 100%;
  }

  .chat-contacts {
    max-width: $contact-sidebar;
    width: 100%;
    -webkit-border-end: 1px solid $border-primary;
            border-inline-end: 1px solid $border-primary;
    max-height: calc(100dvh - $header-h);
    min-height: calc(100dvh - $header-h);
    height: 100%;
    overflow: hidden;
    background-color: $color-white;
    @include lg-down {
      max-height: calc(100dvh - calc($header-h + $sidebar-height));
      min-height: calc(100dvh - calc($header-h + $sidebar-height));
    }

    @include md-down {
      position: fixed;
      inset-inline-start: 0;
      inset-block-start: 0;
      -webkit-border-end: none;
              border-inline-end: none;
      -webkit-transform: translateX(-105%);
          -ms-transform: translateX(-105%);
              transform: translateX(-105%);
      -webkit-transition: 0.2s ease-out;
      -o-transition: 0.2s ease-out;
      transition: 0.2s ease-out;
      z-index: 8;
      max-height: 100dvh;
      min-height: 100dvh;
    }

    .contact-tab-content {
      // width: 100%;
      // max-height: calc(100dvh - calc($header-h + $chat-header));
      // overflow-y: auto;
      // overflow-x: hidden;
      // @include lg-down {
      //   max-height: calc(
      //     100dvh - calc($header-h + $chat-header + $sidebar-height)
      //   );
      // }
      // @include md-down {
      //   max-height: calc(100dvh - $chat-header);
      // }
      .contact-menu{
        width: 100%;
        max-height: calc(100dvh - calc($header-h + $chat-header + 50px));
        overflow-y: auto;
        overflow-x: hidden;
        @include lg-down {
          max-height: calc(
            100dvh - calc($header-h + $chat-header + $sidebar-height)
          );
        }
        @include md-down {
          max-height: calc(100dvh - $chat-header);
        }
      }
    }
  }

  .chat-body {
    max-width: calc(100% - calc($contact-sidebar + $profile-sidebar));
    width: 100%;

    @include xxl-down {
      max-width: calc(100% - $contact-sidebar);
    }

    @include md-down {
      max-width: calc(100% - 0px);
    }

    .chat-box {
      max-height: calc(100dvh - calc($chat-header + $header-h + 80px + 10px));
      min-height: calc(100dvh - calc($chat-header + $header-h + 80px + 10px));
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;

      @include lg-down {
        max-height: calc(100dvh - calc($chat-header + $header-h + $sidebar-height + 80px + 10px));
        min-height: calc(100dvh - calc($chat-header + $header-h + $sidebar-height + 80px + 10px));
      }
    }
  }

  .chat-profile {
    max-width: $profile-sidebar;
    width: 100%;
    max-height: calc(100dvh - $header-h);
    min-height: calc(100dvh - $header-h);
    height: 100%;
    overflow: hidden;
    -webkit-border-start: 1px solid var(--border-primary);
            border-inline-start: 1px solid var(--border-primary);
    background-color: $color-white;
    @include xxl-down {
      position: fixed;
      inset-inline-end: 0;
      -webkit-transition: 0.3s ease-out;
      -o-transition: 0.3s ease-out;
      transition: 0.3s ease-out;
      -webkit-transform: translateX(105%);
          -ms-transform: translateX(105%);
              transform: translateX(105%);
      z-index: 5;
      [dir="rtl"] & {
        -webkit-transform: translateX(-105%);
            -ms-transform: translateX(-105%);
                transform: translateX(-105%);
      }
    }
    @include lg-down {
      max-height: calc(100dvh - calc($header-h + $sidebar-height));
      min-height: calc(100dvh - calc($header-h + $sidebar-height));
    }

    @include md-down {
      inset-block-start: 0;
      max-height: 100dvh;
      min-height: 100dvh;
    }

    .profile-body {
      width: 100%;
      max-height: calc(100dvh - calc($header-h + $chat-header));
      overflow-y: auto;
      overflow-x: hidden;
      @include lg-down {
        max-height: calc(
          100dvh - calc($header-h + $chat-header + $sidebar-height)
        );
      }
      @include md-down {
        max-height: calc(100dvh - $chat-header);
      }
    }
  }

  .chat-header {
    height: $chat-header;
    border-bottom: 1px solid $border-primary;
    padding-inline: 15px;
    @include flex($align: center);
  }

  .sidebar-overlay {
    @include xxl-down {
      position: fixed;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.2);
      inset-inline: 0;
      z-index: 4;
    }
    @include md-down {
      position: fixed;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.2);
      inset-inline: 0;
      z-index: 4;
      inset: 0;
    }
  }

  .empty-chat{
    max-width: calc(100% - $contact-sidebar);
    width: 100%;
    @include flex($align:center,$justify:center);
    background-color: $light-bg;
    
    .empty-chat-content{
        max-width: 500px;
        margin-inline: auto;
        width: 100%;
        text-align: center;
        @include flex($align:center,$direction:column,$gap:30px);
      
        .message-icon-animation{
          position: relative;
          width: 10em;
          height: 10em;
          .message-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            transform: translate(-50%, -50%);
          }
          
          .chat-animate{
            color: #12395f;
            overflow: hidden;
          }
          
          .chat-animate> i {
            position: absolute;
            top: 50%;
            left: 50%;
            display: block;
            width: 5.0625em;
            height: 2.625em;
            margin-left: -1.25em;
            transform: translate(-50%, -50%);
            background-color: #85c996;
            border: 0.25em solid;
            background-size: 1.25em;
            background-position: -0.0625em -0.1875em;
            border-radius: 0.5em;
            animation: slide1 2.43s infinite linear;
          }
          
          .chat-animate> i:nth-child(even) {
            margin: 3.875em 0 0 1.1825em;
            transform: translate(-50%, -50%) scaleX(-1);
            background-color: #ffdea3;
            animation: slide2 2.43s infinite linear;
          }
          
          .chat-animate> i:nth-child(3) {
            margin-top: 7.75em;
          }
          
          .chat-animate> i:nth-child(4) {
            margin: 11.625em 0 0 1.1825em;
          }
          
          .chat-animate i i:first-child {
            position: absolute;
            top: 100%;
            left: 0.375em;
            width: 1.6875em;
            height: 1em;
            overflow: hidden;
          }
          
          .chat-animate i i:first-child:before,
          .chat-animate i i:first-child:after {
            content: "";
            position: absolute;
            right: 0;
            bottom: 0;
            display: block;
            width: 100%;
            height: 200%;
            border-radius: 50% 50% 80%;
            box-shadow: inset -0.875em 0 currentColor;
          }
          
          .chat-animate i i:first-child:after {
            right: 0.3125em;
            bottom: 0.25em;
            width: 80%;
            transform: rotate(-18deg);
            box-shadow: inset -0.375em 0 #85c996;
          }
          
          .chat-animate i:nth-child(even) i:first-child:after {
            box-shadow: inset -0.375em 0 #ffdea3;
          }
          
          .chat-animate i i:last-child,
          .chat-animate i i:last-child:before,
          .chat-animate i i:last-child:after {
            content: "";
            position: absolute;
            top: 0.75em;
            left: 0.5625em;
            display: block;
            width: 80%;
            height: 0.125em;
            transform-origin: 0 0;
            background: currentColor;
          }
          
          .chat-animate i:nth-child(3) i:last-child,
          .chat-animate i:nth-child(3) i:last-child:before,
          .chat-animate i:nth-child(3) i:last-child:after {
            animation: draw 2.43s 1.215s infinite;
          }
          
          .chat-animate i:nth-child(4) i:last-child,
          .chat-animate i:nth-child(4) i:last-child:before,
          .chat-animate i:nth-child(4) i:last-child:after {
            transform-origin: 100% 0;
            animation: draw 2.43s infinite;
          }
          
          .chat-animate i i:last-child:before,
          .chat-animate i i:last-child:after {
            top: 0.5625em;
            left: 0;
            width: 100%;
            box-shadow: none;
          }
          
          .chat-animate i:nth-child(3) i:last-child:before,
          .chat-animate i:nth-child(3) i:last-child:after {
            animation-delay: 1.34s;
          }
          
          .chat-animate i:nth-child(4) i:last-child:before {
            animation-delay: 0.125s;
          }
          
          .chat-animate i i:last-child:after {
            top: 1.125em;
            width: 35%;
          }
          
          .chat-animate i:nth-child(even) i:last-child:after {
            left: 2em;
            width: 50%;
          }
          
          .chat-animate i:nth-child(3) i:last-child:after {
            animation-delay: 1.375s;
          }
          
          .chat-animate i:nth-child(4) i:last-child:after {
            animation-delay: 0.25s;
          }
          
          @keyframes slide1 {
            0%,
            5% {
              transform: translate(-50%, 0);
            }
            18%,
            52% {
              transform: translate(-50%, -124%);
            }
            65%,
            100% {
              transform: translate(-50%, -248%);
            }
          }
          
          @keyframes slide2 {
            0%,
            5% {
              transform: translate(-50%, -248%) scaleX(-1);
            }
            18%,
            52% {
              transform: translate(-50%, -372%) scaleX(-1);
            }
            65%,
            100% {
              transform: translate(-50%, -496%) scaleX(-1);
            }
          }
          
          @keyframes draw {
            0%,
            20% {
              transform: scaleX(0);
            }
            27%,
            100% {
              transform: scaleX(1);
            }
          }
        }

        .empty-chat-image{
            width: 150px;
            height: 100%;
        }
    }
  }

  .chat-loader{
    max-width: calc(100% - $contact-sidebar);
    width: 100%;
    @include flex($align:center,$justify:center);
    background-color: $light-bg;
  }
}
